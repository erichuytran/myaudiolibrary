<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head th:replace="fragments/header :: head"></head>
	<body class="ember-application">
		<div>
			<nav th:replace="fragments/header :: menu"></nav>

			<div class="container">
				<h2>DÃ©tail de l'artiste [[${artist.name}]]</h2>

				<div class="row">
					<div class="col-lg-12">
						<form class="form-group" id="artistForm" th:action="${artist.id != null ? '/artists/' + artist.id : '/artists'}" th:method="${artist.id != null ? 'put' : 'post'}">
							<input type="hidden" th:value="${artist.id}" name="id">
							<label for="name" class="form-control-label">Nom</label>
							<input type="text" name="name" id="name" class="ember-text-field form-control ember-view" th:value="${artist.name}" required>
						</form>
						<div class="row" th:if="${artist.id != null}">
							<div class="col-lg-10">
								<label for="performance" class="form-control-label">Albums</label>
								<div class="list-group" th:each="album : ${artist.albums}">
									<form action="/albums" th:method="delete">
										<div class="list-group-item">
											<input class="list-group-item" th:name="title" th:value="${album.title}">
											<input class="list-group-item" th:name="id" th:value="${album.id}" type="hidden">
											<input class="list-group-item" th:name="artist" th:value="${artist.id}" type="hidden">
											<button class="btn-danger list-group-item list-group-item-action" type="submit"><span class="glyphicon glyphicon-remove"></span></button>
										</div>
									</form>
								</div>
							</div>
						</div>
						<div class="row" th:if="${artist.id != null}" >
							<div class="col">
								<form th:action="'/albums'" method="post">
									<input type="text" placeholder="Ajouter un album..." class="form-control ember-text-field ember-view" name="title">
									<input type="hidden" name="artist" th:value="${artist.id}">
									<div class="col text-center">
										<button type="submit" class="glyphicon glyphicon-plus btn-success list-group-item list-group-item-action"></button>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="row">
					<button form="artistForm" type="submit" class="btn btn-primary">Enregistrer</button>
					<form th:if="${artist.id != null}" th:action="|/artists/${artist.id}|" th:method="delete">
						<button class="btn btn-danger" type="submit">
							Supprimer
						</button>
					</form>
				</div>
			</div>
		</div>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>
	</body>
</html>